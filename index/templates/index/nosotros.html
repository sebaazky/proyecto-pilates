{% extends 'index/base_index.html' %}
{% block title %}Nosotros | PilatesReserva{% endblock %}

{% block extra_head %}
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;0,900;1,700&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  /* ── PALETA NOSOTROS ───────────────────────────── */
  :root {
    --n-ink:    #0a0a0f;
    --n-cream:  #faf8f4;
    --n-gold:   #c9a84c;
    --n-cyan:   #12b3ff;
    --n-violet: #7c3aed;
    --n-mist:   #f0ede8;
  }
  [data-theme="dark"] {
    --n-ink:   #f0ede8;
    --n-cream: #0d0d14;
    --n-mist:  #14141f;
  }

  /* ── TIPOGRAFÍA ────────────────────────────────── */
  .ns-display {
    font-family: 'Playfair Display', Georgia, serif;
    font-weight: 900;
    line-height: .95;
    letter-spacing: -.02em;
  }
  .ns-label {
    font-family: 'DM Sans', sans-serif;
    font-size: .7rem;
    font-weight: 500;
    letter-spacing: .18em;
    text-transform: uppercase;
    color: var(--n-gold);
  }
  .ns-body {
    font-family: 'DM Sans', sans-serif;
    font-size: 1.05rem;
    line-height: 1.75;
    color: #5a5a6e;
  }
  [data-theme="dark"] .ns-body { color: #9a9ab0; }

  /* ── HERO EDITORIAL ────────────────────────────── */
  .ns-hero {
    min-height: 92vh;
    display: grid;
    grid-template-columns: 1fr 1fr;
    overflow: hidden;
    position: relative;
  }
  @media (max-width: 900px) { .ns-hero { grid-template-columns: 1fr; min-height: auto; } }

  .ns-hero-left {
    background: var(--n-ink);
    color: #fff;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    padding: clamp(2rem, 6vw, 5rem);
    position: relative;
    overflow: hidden;
  }
  .ns-hero-left::before {
    content: '';
    position: absolute; inset: 0;
    background:
      radial-gradient(ellipse 60% 50% at 0% 100%, rgba(124,58,237,.35), transparent 60%),
      radial-gradient(ellipse 50% 40% at 100% 0%, rgba(18,179,255,.2), transparent 55%);
  }
  .ns-hero-num {
    font-family: 'Playfair Display', serif;
    font-size: clamp(7rem, 18vw, 14rem);
    font-weight: 900;
    line-height: 1;
    color: rgba(255,255,255,.04);
    position: absolute;
    top: -1rem; right: -1rem;
    pointer-events: none;
    user-select: none;
  }
  .ns-hero-right {
    position: relative;
    overflow: hidden;
  }
  .ns-hero-right img {
    width: 100%; height: 100%;
    object-fit: cover;
    display: block;
    transition: transform 8s ease;
  }
  .ns-hero-right:hover img { transform: scale(1.04); }
  .ns-hero-overlay {
    position: absolute; inset: 0;
    background: linear-gradient(135deg, rgba(124,58,237,.15), rgba(18,179,255,.1));
    mix-blend-mode: multiply;
  }
  .ns-hero-tag {
    position: absolute; bottom: 2rem; left: 2rem;
    background: rgba(255,255,255,.92);
    backdrop-filter: blur(12px);
    border-radius: 999px;
    padding: .5rem 1.2rem;
    font-family: 'DM Sans', sans-serif;
    font-size: .82rem;
    font-weight: 500;
    color: var(--n-ink);
    display: flex; align-items: center; gap: .5rem;
    box-shadow: 0 8px 24px rgba(0,0,0,.12);
    animation: float 4s ease-in-out infinite;
  }
  @keyframes float { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-6px)} }

  /* ── STATS STRIP ───────────────────────────────── */
  .ns-stats {
    background: var(--n-gold);
    overflow: hidden;
  }
  .ns-stats-inner {
    display: flex;
    align-items: stretch;
    divide-x: 1px solid rgba(0,0,0,.1);
  }
  .ns-stat {
    flex: 1;
    padding: 2rem 1.5rem;
    text-align: center;
    border-right: 1px solid rgba(0,0,0,.12);
    position: relative;
    overflow: hidden;
  }
  .ns-stat:last-child { border-right: 0; }
  .ns-stat-num {
    font-family: 'Playfair Display', serif;
    font-size: clamp(2.2rem, 5vw, 3.5rem);
    font-weight: 900;
    color: var(--n-ink);
    line-height: 1;
    display: block;
  }
  .ns-stat-label {
    font-family: 'DM Sans', sans-serif;
    font-size: .78rem;
    letter-spacing: .1em;
    text-transform: uppercase;
    color: rgba(10,10,15,.6);
    margin-top: .3rem;
    display: block;
  }

  /* ── HISTORIA ASIMÉTRICA ───────────────────────── */
  .ns-historia {
    display: grid;
    grid-template-columns: 55% 45%;
    min-height: 80vh;
    overflow: hidden;
  }
  @media (max-width: 900px) { .ns-historia { grid-template-columns: 1fr; } }

  .ns-historia-text {
    padding: clamp(3rem, 8vw, 6rem);
    display: flex;
    flex-direction: column;
    justify-content: center;
    background: var(--n-cream);
  }
  .ns-historia-img {
    position: relative;
    overflow: hidden;
  }
  .ns-historia-img img {
    width: 100%; height: 100%;
    object-fit: cover;
    filter: grayscale(20%);
    transition: filter .6s ease, transform .6s ease;
  }
  .ns-historia-img:hover img { filter: grayscale(0%); transform: scale(1.03); }
  .ns-historia-badge {
    position: absolute;
    top: 2rem; left: -1px;
    background: var(--n-gold);
    color: var(--n-ink);
    font-family: 'DM Sans', sans-serif;
    font-weight: 600;
    font-size: .8rem;
    padding: .6rem 1.4rem;
    letter-spacing: .08em;
    text-transform: uppercase;
    box-shadow: 4px 4px 0 rgba(0,0,0,.12);
  }

  /* ── MISIÓN / VISIÓN ───────────────────────────── */
  .ns-mv-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0;
    overflow: hidden;
    border-radius: 24px;
    box-shadow: 0 24px 60px rgba(0,0,0,.1);
  }
  @media (max-width: 700px) { .ns-mv-grid { grid-template-columns: 1fr; } }
  .ns-mv-card {
    padding: clamp(2rem, 5vw, 3.5rem);
    position: relative;
    overflow: hidden;
  }
  .ns-mv-card.mision {
    background: var(--n-ink);
    color: #fff;
  }
  .ns-mv-card.vision {
    background: var(--n-gold);
    color: var(--n-ink);
  }
  .ns-mv-card::before {
    content: attr(data-word);
    font-family: 'Playfair Display', serif;
    font-size: clamp(5rem, 12vw, 9rem);
    font-weight: 900;
    position: absolute;
    bottom: -1rem; right: -1rem;
    opacity: .06;
    line-height: 1;
    pointer-events: none;
    color: currentColor;
  }
  .ns-mv-icon {
    width: 56px; height: 56px;
    border-radius: 16px;
    display: flex; align-items: center; justify-content: center;
    font-size: 1.5rem;
    margin-bottom: 1.5rem;
  }
  .mision .ns-mv-icon { background: rgba(255,255,255,.08); color: var(--n-cyan); }
  .vision .ns-mv-icon { background: rgba(0,0,0,.1); color: var(--n-ink); }
  .ns-mv-title {
    font-family: 'Playfair Display', serif;
    font-size: clamp(1.5rem, 3vw, 2rem);
    font-weight: 700;
    margin-bottom: 1rem;
  }

  /* ── VALORES ───────────────────────────────────── */
  .ns-valor {
    padding: 2rem;
    border-radius: 20px;
    border: 1.5px solid var(--n-mist);
    background: var(--n-cream);
    transition: all .3s ease;
    cursor: default;
    position: relative;
    overflow: hidden;
  }
  .ns-valor::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, var(--n-cyan), var(--n-violet));
    opacity: 0;
    transition: opacity .3s ease;
    border-radius: inherit;
    z-index: 0;
  }
  .ns-valor:hover { transform: translateY(-6px); border-color: transparent; box-shadow: 0 20px 40px rgba(18,179,255,.2); }
  .ns-valor:hover::after { opacity: 1; }
  .ns-valor > * { position: relative; z-index: 1; }
  .ns-valor:hover .ns-valor-icon,
  .ns-valor:hover .ns-valor-title,
  .ns-valor:hover .ns-valor-text { color: #fff !important; }
  .ns-valor-icon {
    font-size: 2rem;
    margin-bottom: .75rem;
    display: block;
    transition: color .3s;
  }
  .ns-valor-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.15rem;
    font-weight: 700;
    margin-bottom: .4rem;
    transition: color .3s;
  }
  .ns-valor-text {
    font-family: 'DM Sans', sans-serif;
    font-size: .88rem;
    color: #6b6b80;
    line-height: 1.6;
    transition: color .3s;
  }

  /* ── EQUIPO ────────────────────────────────────── */
  .ns-instructor {
    position: relative;
    overflow: hidden;
    border-radius: 24px;
    aspect-ratio: 3/4;
  }
  .ns-instructor img {
    width: 100%; height: 100%;
    object-fit: cover;
    transition: transform .6s ease;
    filter: grayscale(30%);
  }
  .ns-instructor:hover img { transform: scale(1.06); filter: grayscale(0%); }
  .ns-instructor-info {
    position: absolute;
    bottom: 0; left: 0; right: 0;
    background: linear-gradient(0deg, rgba(10,10,15,.9) 0%, transparent 100%);
    padding: 2rem 1.5rem 1.5rem;
    transform: translateY(40%);
    transition: transform .4s ease;
  }
  .ns-instructor:hover .ns-instructor-info { transform: translateY(0); }
  .ns-instructor-name {
    font-family: 'Playfair Display', serif;
    font-size: 1.25rem;
    font-weight: 700;
    color: #fff;
    margin-bottom: .25rem;
  }
  .ns-instructor-role {
    font-family: 'DM Sans', sans-serif;
    font-size: .8rem;
    color: var(--n-gold);
    letter-spacing: .08em;
    text-transform: uppercase;
    margin-bottom: .75rem;
  }
  .ns-instructor-bio {
    font-family: 'DM Sans', sans-serif;
    font-size: .82rem;
    color: rgba(255,255,255,.75);
    line-height: 1.5;
  }

  /* ── CTA FINAL ─────────────────────────────────── */
  .ns-cta {
    background: var(--n-ink);
    color: #fff;
    position: relative;
    overflow: hidden;
  }
  .ns-cta::before {
    content: '';
    position: absolute; inset: 0;
    background:
      radial-gradient(ellipse 60% 80% at 0% 50%, rgba(124,58,237,.3), transparent 60%),
      radial-gradient(ellipse 50% 60% at 100% 50%, rgba(18,179,255,.2), transparent 60%);
  }
  .ns-cta-btn {
    font-family: 'DM Sans', sans-serif;
    font-weight: 600;
    padding: .9rem 2.5rem;
    border-radius: 999px;
    border: 2px solid rgba(255,255,255,.2);
    background: transparent;
    color: #fff;
    text-decoration: none;
    letter-spacing: .04em;
    transition: all .25s ease;
    display: inline-flex;
    align-items: center;
    gap: .5rem;
  }
  .ns-cta-btn:hover {
    background: #fff;
    color: var(--n-ink);
    border-color: #fff;
    transform: translateY(-2px);
    box-shadow: 0 12px 30px rgba(255,255,255,.15);
  }
  .ns-cta-btn.filled {
    background: var(--n-gold);
    border-color: var(--n-gold);
    color: var(--n-ink);
  }
  .ns-cta-btn.filled:hover { background: #e0b854; border-color: #e0b854; color: var(--n-ink); }

  /* ── REVEAL ────────────────────────────────────── */
  .ns-reveal {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity .7s ease, transform .7s ease;
  }
  .ns-reveal.ns-in { opacity: 1; transform: none; }
  .ns-reveal-d1 { transition-delay: .1s; }
  .ns-reveal-d2 { transition-delay: .2s; }
  .ns-reveal-d3 { transition-delay: .3s; }
  .ns-reveal-d4 { transition-delay: .4s; }
</style>
{% endblock %}

{% block content %}

<!-- ═══════════════════════════════════════════════
     HERO EDITORIAL
════════════════════════════════════════════════ -->
<section class="ns-hero">
  <div class="ns-hero-left">
    <span class="ns-hero-num" aria-hidden="true">10</span>
    <div style="position:relative;z-index:1;">
      <p class="ns-label mb-3">Centro de Pilates · Peñalolén</p>
      <h1 class="ns-display text-white mb-4"
          style="font-size:clamp(2.8rem,6vw,5rem);">
        Diez años<br>
        <em style="color:var(--n-gold);">transformando</em><br>
        cuerpos y mentes
      </h1>
      <p class="ns-body mb-5" style="color:rgba(255,255,255,.65);max-width:480px;">
        Somos más que un centro de Pilates. Somos una comunidad que cree en el movimiento
        consciente como camino al bienestar real.
      </p>
      <a href="{% url 'index:contacto_publico' %}" class="ns-cta-btn filled">
        <i class="bi bi-chat-dots"></i> Habla con nosotros
      </a>
    </div>
  </div>
  <div class="ns-hero-right">
    <img src="https://images.unsplash.com/photo-1518611012118-696072aa579a?w=900&q=85"
         alt="Estudio Pilates Reforma">
    <div class="ns-hero-overlay"></div>
    <div class="ns-hero-tag">
      <i class="bi bi-patch-check-fill text-warning"></i>
      Instructores certificados internacionalmente
    </div>
  </div>
</section>

<!-- ═══════════════════════════════════════════════
     STATS STRIP
════════════════════════════════════════════════ -->
<div class="ns-stats">
  <div class="ns-stats-inner">
    <div class="ns-stat">
      <span class="ns-stat-num" data-target="500">0</span>
      <span class="ns-stat-label">Alumnos activos</span>
    </div>
    <div class="ns-stat">
      <span class="ns-stat-num" data-target="10">0</span>
      <span class="ns-stat-label">Años de experiencia</span>
    </div>
    <div class="ns-stat">
      <span class="ns-stat-num" data-target="8">0</span>
      <span class="ns-stat-label">Instructores certificados</span>
    </div>
    <div class="ns-stat">
      <span class="ns-stat-num" data-target="3">0</span>
      <span class="ns-stat-label">Tipos de clase</span>
    </div>
  </div>
</div>

<!-- ═══════════════════════════════════════════════
     HISTORIA
════════════════════════════════════════════════ -->
<section class="ns-historia">
  <div class="ns-historia-text ns-reveal">
    <p class="ns-label mb-3">Nuestra historia</p>
    <h2 class="ns-display mb-5"
        style="font-size:clamp(2rem,4vw,3.2rem);color:var(--n-ink);">
      Nacimos con<br>una convicción:<br>
      <em style="color:var(--n-cyan);">el movimiento sana</em>
    </h2>
    <p class="ns-body mb-4">
      Pilates Reforma nació en 2014 en Peñalolén con el sueño de llevar el método
      Pilates a más personas. Comenzamos con una sala pequeña, dos reformers y
      muchas ganas de cambiar la forma en que la gente se relaciona con su cuerpo.
    </p>
    <p class="ns-body">
      Hoy contamos con instalaciones modernas, instructores con certificaciones
      internacionales y una comunidad activa que confía en nosotros cada semana.
      Cada clase es un espacio de transformación real.
    </p>
  </div>
  <div class="ns-historia-img">
    <img src="https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=800&q=85"
         alt="Historia Pilates Reforma">
    <div class="ns-historia-badge">Desde 2014</div>
  </div>
</section>

<!-- ═══════════════════════════════════════════════
     MISIÓN & VISIÓN
════════════════════════════════════════════════ -->
<section class="py-5" style="background:var(--n-mist);">
  <div class="container py-3">
    <div class="text-center mb-5 ns-reveal">
      <p class="ns-label mb-2">Propósito</p>
      <h2 class="ns-display" style="font-size:clamp(1.8rem,4vw,3rem);color:var(--n-ink);">
        Lo que nos mueve cada día
      </h2>
    </div>
    <div class="ns-mv-grid ns-reveal ns-reveal-d1">
      <div class="ns-mv-card mision" data-word="Misión">
        <div class="ns-mv-icon"><i class="bi bi-bullseye"></i></div>
        <h3 class="ns-mv-title">Nuestra Misión</h3>
        <p style="font-family:'DM Sans',sans-serif;line-height:1.7;opacity:.85;font-size:.98rem;">
          Brindar clases de Pilates de alta calidad que transformen la vida de nuestros alumnos,
          promoviendo el bienestar físico y mental a través de una práctica segura, progresiva
          y adaptada a cada persona.
        </p>
      </div>
      <div class="ns-mv-card vision" data-word="Visión">
        <div class="ns-mv-icon"><i class="bi bi-eye"></i></div>
        <h3 class="ns-mv-title">Nuestra Visión</h3>
        <p style="font-family:'DM Sans',sans-serif;line-height:1.7;opacity:.75;font-size:.98rem;">
          Ser el centro de Pilates de referencia en Santiago, reconocido por la excelencia
          de nuestros instructores, la calidad de nuestras instalaciones y el impacto positivo
          que generamos en la comunidad.
        </p>
      </div>
    </div>
  </div>
</section>

<!-- ═══════════════════════════════════════════════
     VALORES
════════════════════════════════════════════════ -->
<section class="py-5" style="background:var(--n-cream);">
  <div class="container py-3">
    <div class="text-center mb-5 ns-reveal">
      <p class="ns-label mb-2">Lo que nos define</p>
      <h2 class="ns-display" style="font-size:clamp(1.8rem,4vw,3rem);color:var(--n-ink);">
        Nuestros valores
      </h2>
    </div>
    <div class="row g-3">
      {% for v in "123456" %}
      <div class="col-12 col-sm-6 col-lg-4 ns-reveal ns-reveal-d{{ forloop.counter }}">
        {% if forloop.counter == 1 %}
        <div class="ns-valor h-100">
          <i class="ns-valor-icon bi bi-shield-heart" style="color:var(--n-cyan);"></i>
          <div class="ns-valor-title" style="color:var(--n-ink);">Seguridad</div>
          <p class="ns-valor-text">Cada clase protege tu cuerpo. Correcciones precisas y progresión adecuada en todo momento.</p>
        </div>
        {% elif forloop.counter == 2 %}
        <div class="ns-valor h-100">
          <i class="ns-valor-icon bi bi-people-fill" style="color:var(--n-violet);"></i>
          <div class="ns-valor-title" style="color:var(--n-ink);">Comunidad</div>
          <p class="ns-valor-text">Creemos en el poder del grupo. Nuestros alumnos se apoyan y crecen juntos.</p>
        </div>
        {% elif forloop.counter == 3 %}
        <div class="ns-valor h-100">
          <i class="ns-valor-icon bi bi-award" style="color:var(--n-gold);"></i>
          <div class="ns-valor-title" style="color:var(--n-ink);">Excelencia</div>
          <p class="ns-valor-text">Formación continua y estándares internacionales en cada sesión sin excepción.</p>
        </div>
        {% elif forloop.counter == 4 %}
        <div class="ns-valor h-100">
          <i class="ns-valor-icon bi bi-person-check" style="color:var(--n-cyan);"></i>
          <div class="ns-valor-title" style="color:var(--n-ink);">Personalización</div>
          <p class="ns-valor-text">Cada cuerpo es único. Adaptamos el método a tus necesidades y objetivos reales.</p>
        </div>
        {% elif forloop.counter == 5 %}
        <div class="ns-valor h-100">
          <i class="ns-valor-icon bi bi-heart-pulse" style="color:var(--n-violet);"></i>
          <div class="ns-valor-title" style="color:var(--n-ink);">Bienestar integral</div>
          <p class="ns-valor-text">Cuerpo y mente van de la mano. Postura, respiración y equilibrio emocional.</p>
        </div>
        {% else %}
        <div class="ns-valor h-100">
          <i class="ns-valor-icon bi bi-infinity" style="color:var(--n-gold);"></i>
          <div class="ns-valor-title" style="color:var(--n-ink);">Constancia</div>
          <p class="ns-valor-text">Los grandes cambios vienen de la práctica regular. Te ayudamos a mantener el ritmo.</p>
        </div>
        {% endif %}
      </div>
      {% endfor %}
    </div>
  </div>
</section>

<!-- ═══════════════════════════════════════════════
     EQUIPO
════════════════════════════════════════════════ -->
{% if instructores %}
<section class="py-5" style="background:var(--n-mist);">
  <div class="container py-3">
    <div class="text-center mb-5 ns-reveal">
      <p class="ns-label mb-2">El equipo</p>
      <h2 class="ns-display" style="font-size:clamp(1.8rem,4vw,3rem);color:var(--n-ink);">
        Las personas detrás<br>de cada clase
      </h2>
    </div>
    <div class="row g-4">
      {% for instructor in instructores %}
        <div class="col-12 col-md-{% if instructores|length == 1 %}8 mx-auto{% elif instructores|length == 2 %}6{% else %}4{% endif %} ns-reveal ns-reveal-d{{ forloop.counter }}">
          <div class="ns-instructor">
            {% if instructor.photo %}
              <img src="{{ instructor.photo.url }}" alt="{{ instructor.name }}">
            {% else %}
              <div style="width:100%;aspect-ratio:3/4;background:#f3f4f6;display:flex;align-items:center;justify-content:center;">
                <i class="bi bi-person fs-1 text-muted"></i>
              </div>
            {% endif %}
            <div class="ns-instructor-info">
              <div class="ns-instructor-name">{{ instructor.name }}</div>
              <div class="ns-instructor-role">{{ instructor.specialties }}</div>
              <div class="ns-instructor-bio">{{ instructor.bio|truncatewords:20 }}</div>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</section>
{% endif %}

<!-- ═══════════════════════════════════════════════
     CTA FINAL
════════════════════════════════════════════════ -->
<section class="ns-cta py-5">
  <div class="container py-4" style="position:relative;z-index:1;">
    <div class="row align-items-center g-4">
      <div class="col-lg-7 ns-reveal">
        <p class="ns-label mb-3" style="color:var(--n-gold);">Únete a la comunidad</p>
        <h2 class="ns-display text-white mb-3"
            style="font-size:clamp(2rem,4vw,3.2rem);">
          ¿Listo para tu primera clase?
        </h2>
        <p style="font-family:'DM Sans',sans-serif;color:rgba(255,255,255,.65);font-size:1.05rem;max-width:500px;">
          Escríbenos y encontramos juntos la clase que mejor se adapta a ti.
          Sin compromisos, sin letra chica.
        </p>
      </div>
      <div class="col-lg-5 text-lg-end ns-reveal ns-reveal-d2">
        <div class="d-flex flex-wrap gap-3 justify-content-lg-end">
          <a href="{% url 'index:contacto_publico' %}" class="ns-cta-btn filled">
            <i class="bi bi-chat-dots"></i> Contáctanos
          </a>
          <a href="{% url 'index:novedades' %}" class="ns-cta-btn">
            <i class="bi bi-broadcast"></i> Ver novedades
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
(function(){
  // ── CONTADOR ANIMADO ─────────────────────────
  const counters = document.querySelectorAll('.ns-stat-num[data-target]');
  const io = new IntersectionObserver(entries => {
    entries.forEach(e => {
      if(!e.isIntersecting) return;
      const el = e.target;
      const target = +el.dataset.target;
      const suffix = el.dataset.suffix || '';
      const dur = 1800;
      const start = performance.now();
      (function tick(now){
        const p = Math.min((now - start) / dur, 1);
        const ease = 1 - Math.pow(1 - p, 3);
        el.textContent = Math.round(ease * target) + suffix;
        if(p < 1) requestAnimationFrame(tick);
        else el.textContent = target + suffix;
      })(start);
      io.unobserve(el);
    });
  }, {threshold: 0.5});
  counters.forEach(c => io.observe(c));

  // ── REVEAL ────────────────────────────────────
  const reveals = document.querySelectorAll('.ns-reveal');
  const ro = new IntersectionObserver(entries => {
    entries.forEach(e => { if(e.isIntersecting) { e.target.classList.add('ns-in'); ro.unobserve(e.target); } });
  }, {threshold: 0.12});
  reveals.forEach(r => ro.observe(r));
})();
</script>

{% endblock %}